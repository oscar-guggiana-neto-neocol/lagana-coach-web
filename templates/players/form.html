{% extends 'base.html' %}
{% block title %}{% if mode == 'create' %}New Player{% else %}Edit Player{% endif %} · LaganaCoach{% endblock %}
{% block content %}
<h1 class="h4 mb-4">{% if mode == 'create' %}Create player{% else %}Edit player{% endif %}</h1>
<form id="playerForm" data-mode="{{ mode }}" data-player-id="{{ player_id or '' }}">
  <div class="row g-3">
    <div class="col-12 col-md-6">
      <label class="form-label" for="full_name">Full name</label>
      <input class="form-control" id="full_name" name="full_name" required>
    </div>
    <div class="col-12 col-md-6">
      <label class="form-label" for="email">Email</label>
      <input class="form-control" id="email" name="email" type="email">
    </div>
    <div class="col-12 col-md-6">
      <label class="form-label" for="phone">Phone</label>
      <input class="form-control" id="phone" name="phone">
    </div>
    <div class="col-12 col-md-6">
      <label class="form-label" for="birth_date">Birth date</label>
      <input class="form-control" id="birth_date" name="birth_date" type="date">
    </div>
    <div class="col-12 col-md-6">
      <label class="form-label" for="skill_level">Skill level</label>
      <select class="form-select" id="skill_level" name="skill_level">
        <option value="beginner">Beginner</option>
        <option value="intermediate">Intermediate</option>
        <option value="advanced">Advanced</option>
      </select>
    </div>
    <div class="col-12">
      <label class="form-label" for="notes">Notes</label>
      <textarea class="form-control" id="notes" name="notes" rows="3"></textarea>
    </div>
    <div class="col-12">
      <label class="form-label" for="coach_ids">Coaches</label>
      <select class="form-select" id="coach_ids" name="coach_ids" multiple></select>
      <small class="text-muted">Hold Command (⌘) or Control to select multiple coaches.</small>
    </div>
    <div class="col-12 form-check">
      <input class="form-check-input" type="checkbox" id="active" name="active" checked>
      <label class="form-check-label" for="active">Player is active</label>
    </div>
  </div>
  <div class="d-flex justify-content-between mt-4">
    <a class="btn btn-link" href="{{ url_for('players_list') }}">Cancel</a>
    <button class="btn btn-primary" type="submit">Save player</button>
  </div>
</form>
<div class="alert mt-3 d-none" id="playerFormAlert"></div>
{% if mode == 'edit' %}
<section class="mt-5" id="playerLessonsSection">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="h5 mb-0">Lesson History</h2>
  </div>
  <div class="table-responsive border rounded bg-white">
    <table class="table table-striped align-middle mb-0" id="playerLessonsTable">
      <thead>
        <tr>
          <th>Date</th>
          <th>Time</th>
          <th>Type</th>
          <th>Status</th>
          <th>Strokes</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  <p class="text-muted mt-3 d-none" id="playerLessonsEmpty">No lessons recorded for this player yet.</p>
</section>
{% endif %}
{% endblock %}
{% block scripts %}
<script type="module" src="{{ url_for('static', filename='js/players_form.js') }}"></script>
{% endblock %}
